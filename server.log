2025-12-07 11:23:00.833 | INFO     | app.routers.food:analyze_food:25 - Received image analysis request: test.jpg. Deep Search: False
2025-12-07 11:23:00.841 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 11:23:00.842 | INFO     | app.core.vision:analyze_food_image_with_search:34 - Identified items: ['Apple (1 medium)', 'Banana (1 small)']
2025-12-07 11:23:00.842 | INFO     | app.core.vision:analyze_food_image_with_search:37 - Step 2: Searching for items in parallel...
2025-12-07 11:23:00.842 | INFO     | app.core.vision:analyze_food_image_with_search:61 - Step 3: Synthesizing final response with advanced scripting...
2025-12-07 11:23:00.848 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 11:23:00.849 | WARNING  | app.core.vision:analyze_food_image_with_search:125 - Cloud API/Search failed: Cloud API Down. Switching to Local Failsafe. Deep Search: False
2025-12-07 11:23:00.853 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 11:23:00.854 | WARNING  | app.core.vision:analyze_food_image_with_search:125 - Cloud API/Search failed: Cloud API Down. Switching to Local Failsafe. Deep Search: True
2025-12-07 11:23:00.858 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 11:23:00.858 | WARNING  | app.core.vision:analyze_food_image_with_search:125 - Cloud API/Search failed: Cloud Down. Switching to Local Failsafe. Deep Search: False
2025-12-07 11:23:00.859 | CRITICAL | app.core.vision:analyze_food_image_with_search:131 - Local Failsafe also failed: Local Down
2025-12-07 11:23:00.864 | WARNING  | app.core.search:search_food_info:81 - SerpAPI Key is missing. Skipping web search.
2025-12-07 11:23:00.869 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 11:23:00.870 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 0.00s (attempt 1/2)
2025-12-07 11:23:00.873 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 11:23:00.873 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 500 received; backing off 0.00s (attempt 1/1)
2025-12-07 11:23:00.873 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 500 received; backing off 0.00s (attempt 2/1)
2025-12-07 11:23:00.877 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 11:23:00.877 | ERROR    | app.core.search:_request_with_retry:64 - SerpAPI response JSON decode failed
2025-12-07 11:23:00.880 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 11:23:00.880 | ERROR    | app.core.search:_request_with_retry:64 - SerpAPI response JSON decode failed
2025-12-07 13:29:48.660 | INFO     | app.routers.food:analyze_food:25 - Received image analysis request: test.jpg. Deep Search: False
2025-12-07 13:29:48.670 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:29:48.671 | INFO     | app.core.vision:analyze_food_image_with_search:34 - Identified items: ['Apple (1 medium)', 'Banana (1 small)']
2025-12-07 13:29:48.671 | INFO     | app.core.vision:analyze_food_image_with_search:37 - Step 2: Searching for items in parallel...
2025-12-07 13:29:48.671 | INFO     | app.core.vision:analyze_food_image_with_search:61 - Step 3: Synthesizing final response with advanced scripting...
2025-12-07 13:29:48.680 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:29:48.683 | WARNING  | app.core.vision:analyze_food_image_with_search:125 - Cloud API/Search failed: Cloud API Down. Switching to Local Failsafe. Deep Search: False
2025-12-07 13:29:48.690 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:29:48.691 | WARNING  | app.core.vision:analyze_food_image_with_search:125 - Cloud API/Search failed: Cloud API Down. Switching to Local Failsafe. Deep Search: True
2025-12-07 13:29:48.705 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:29:48.705 | WARNING  | app.core.vision:analyze_food_image_with_search:125 - Cloud API/Search failed: Cloud Down. Switching to Local Failsafe. Deep Search: False
2025-12-07 13:29:48.706 | CRITICAL | app.core.vision:analyze_food_image_with_search:131 - Local Failsafe also failed: Local Down
2025-12-07 13:29:48.718 | WARNING  | app.core.search:search_food_info:81 - SerpAPI Key is missing. Skipping web search.
2025-12-07 13:29:48.726 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 13:29:48.726 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 0.00s (attempt 1/2)
2025-12-07 13:29:48.732 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 13:29:48.733 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 500 received; backing off 0.00s (attempt 1/1)
2025-12-07 13:29:48.733 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 500 received; backing off 0.00s (attempt 2/1)
2025-12-07 13:29:48.742 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 13:29:48.742 | ERROR    | app.core.search:_request_with_retry:64 - SerpAPI response JSON decode failed
2025-12-07 13:29:48.748 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 13:29:48.748 | ERROR    | app.core.search:_request_with_retry:64 - SerpAPI response JSON decode failed
2025-12-07 13:31:26.604 | INFO     | app.routers.food:analyze_food:25 - Received image analysis request: upload.jpg. Deep Search: False
2025-12-07 13:31:26.687 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:31:26.687 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-3-pro-preview
2025-12-07 13:31:27.515 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-3-pro-preview failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:31:27.515 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.5-pro
2025-12-07 13:31:27.860 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-2.5-pro failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:31:27.860 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.5-flash
2025-12-07 13:31:28.187 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-2.5-flash failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:31:28.188 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.0-flash-exp
2025-12-07 13:31:29.638 | SUCCESS  | app.core.intelligence:generate_content:50 - Success with model: gemini-2.0-flash-exp
2025-12-07 13:31:29.639 | INFO     | app.core.vision:analyze_food_image_with_search:34 - Identified items: ["Here's a list of the food items and estimated portion sizes based on the image:", 'Paneer Butter Masala (2 cups)', 'Naan (1/2 piece)']
2025-12-07 13:31:29.639 | INFO     | app.core.vision:analyze_food_image_with_search:37 - Step 2: Searching for items in parallel...
2025-12-07 13:31:29.642 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: Here's a list of the food items and estimated portion sizes based on the image: calories nutrition facts
2025-12-07 13:31:30.031 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: Paneer Butter Masala (2 cups) calories nutrition facts
2025-12-07 13:31:30.032 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: Naan (1/2 piece) calories nutrition facts
2025-12-07 13:31:30.605 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.00s (attempt 1/2)
2025-12-07 13:31:31.451 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.00s (attempt 1/2)
2025-12-07 13:31:32.419 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.00s (attempt 1/2)
2025-12-07 13:31:33.501 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.50s (attempt 2/2)
2025-12-07 13:31:34.491 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.50s (attempt 2/2)
2025-12-07 13:31:35.472 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.50s (attempt 2/2)
2025-12-07 13:31:37.066 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 2.25s (attempt 3/2)
2025-12-07 13:31:37.502 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 2.25s (attempt 3/2)
2025-12-07 13:31:38.423 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 2.25s (attempt 3/2)
2025-12-07 13:31:38.423 | INFO     | app.core.vision:analyze_food_image_with_search:61 - Step 3: Synthesizing final response with advanced scripting...
2025-12-07 13:31:38.425 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-3-pro-preview
2025-12-07 13:31:38.764 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-3-pro-preview failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:31:38.765 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.5-pro
2025-12-07 13:31:39.082 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-2.5-pro failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:31:39.082 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.5-flash
2025-12-07 13:31:39.440 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-2.5-flash failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:31:39.441 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.0-flash-exp
2025-12-07 13:31:43.449 | SUCCESS  | app.core.intelligence:generate_content:50 - Success with model: gemini-2.0-flash-exp
2025-12-07 13:34:36.300 | INFO     | app.routers.food:analyze_food:25 - Received image analysis request: test.jpg. Deep Search: False
2025-12-07 13:34:36.349 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:34:36.349 | INFO     | app.core.vision:analyze_food_image_with_search:34 - Identified items: ['Apple (1 medium)', 'Banana (1 small)']
2025-12-07 13:34:36.349 | INFO     | app.core.vision:analyze_food_image_with_search:37 - Step 2: Searching for items in parallel...
2025-12-07 13:34:36.350 | INFO     | app.core.vision:analyze_food_image_with_search:61 - Step 3: Synthesizing final response with advanced scripting...
2025-12-07 13:34:36.359 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:34:36.361 | WARNING  | app.core.vision:analyze_food_image_with_search:126 - Cloud API/Search failed: Cloud API Down. Switching to Local Failsafe. Deep Search: False
2025-12-07 13:34:36.374 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:34:36.375 | WARNING  | app.core.vision:analyze_food_image_with_search:126 - Cloud API/Search failed: Cloud API Down. Switching to Local Failsafe. Deep Search: True
2025-12-07 13:34:36.382 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:34:36.382 | WARNING  | app.core.vision:analyze_food_image_with_search:126 - Cloud API/Search failed: Cloud Down. Switching to Local Failsafe. Deep Search: False
2025-12-07 13:34:36.383 | CRITICAL | app.core.vision:analyze_food_image_with_search:132 - Local Failsafe also failed: Local Down
2025-12-07 13:34:36.390 | WARNING  | app.core.search:search_food_info:81 - SerpAPI Key is missing. Skipping web search.
2025-12-07 13:34:36.399 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 13:34:36.399 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 0.00s (attempt 1/2)
2025-12-07 13:34:36.404 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 13:34:36.405 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 500 received; backing off 0.00s (attempt 1/1)
2025-12-07 13:34:36.405 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 500 received; backing off 0.00s (attempt 2/1)
2025-12-07 13:34:36.411 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 13:34:36.411 | ERROR    | app.core.search:_request_with_retry:64 - SerpAPI response JSON decode failed
2025-12-07 13:34:36.417 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: apple calories
2025-12-07 13:34:36.417 | ERROR    | app.core.search:_request_with_retry:64 - SerpAPI response JSON decode failed
2025-12-07 13:38:15.970 | INFO     | app.routers.food:analyze_food:25 - Received image analysis request: upload.jpg. Deep Search: False
2025-12-07 13:38:15.997 | INFO     | app.core.vision:analyze_food_image_with_search:23 - Step 1: Identifying food items and estimating portions...
2025-12-07 13:38:15.998 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-3-pro-preview
2025-12-07 13:38:16.879 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-3-pro-preview failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:38:16.879 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.5-pro
2025-12-07 13:38:17.222 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-2.5-pro failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:38:17.222 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.5-flash
2025-12-07 13:38:17.556 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-2.5-flash failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:38:17.557 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.0-flash-exp
2025-12-07 13:38:18.824 | SUCCESS  | app.core.intelligence:generate_content:50 - Success with model: gemini-2.0-flash-exp
2025-12-07 13:38:18.825 | INFO     | app.core.vision:analyze_food_image_with_search:34 - Identified items: ['Here are the food items identified and their estimated portion sizes:', 'Paneer Butter Masala (1.5 cups)', 'Naan (1/2 piece)']
2025-12-07 13:38:18.828 | INFO     | app.core.vision:analyze_food_image_with_search:37 - Step 2: Searching for items in parallel...
2025-12-07 13:38:18.830 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: Here are the food items identified and their estimated portion sizes: calories nutrition facts
2025-12-07 13:38:19.291 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: Paneer Butter Masala (1.5 cups) calories nutrition facts
2025-12-07 13:38:19.291 | INFO     | app.core.search:search_food_info:84 - Searching SerpAPI for: Naan (1/2 piece) calories nutrition facts
2025-12-07 13:38:19.712 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.00s (attempt 1/2)
2025-12-07 13:38:20.481 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.00s (attempt 1/2)
2025-12-07 13:38:22.184 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.00s (attempt 1/2)
2025-12-07 13:38:22.586 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.50s (attempt 2/2)
2025-12-07 13:38:23.537 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.50s (attempt 2/2)
2025-12-07 13:38:24.812 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 1.50s (attempt 2/2)
2025-12-07 13:38:25.607 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 2.25s (attempt 3/2)
2025-12-07 13:38:26.552 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 2.25s (attempt 3/2)
2025-12-07 13:38:28.268 | WARNING  | app.core.search:_request_with_retry:51 - SerpAPI 429 received; backing off 2.25s (attempt 3/2)
2025-12-07 13:38:28.268 | INFO     | app.core.vision:analyze_food_image_with_search:61 - Step 3: Synthesizing final response with advanced scripting...
2025-12-07 13:38:28.269 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-3-pro-preview
2025-12-07 13:38:28.585 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-3-pro-preview failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:38:28.585 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.5-pro
2025-12-07 13:38:28.935 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-2.5-pro failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:38:28.935 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.5-flash
2025-12-07 13:38:29.264 | WARNING  | app.core.intelligence:generate_content:54 - Model gemini-2.5-flash failed: 403 Your API key was reported as leaked. Please use another API key.
2025-12-07 13:38:29.264 | INFO     | app.core.intelligence:generate_content:35 - Attempting generation with model: gemini-2.0-flash-exp
2025-12-07 13:38:33.249 | SUCCESS  | app.core.intelligence:generate_content:50 - Success with model: gemini-2.0-flash-exp
